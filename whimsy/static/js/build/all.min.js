!function(t){"use strict";t.fn.jQCloud=function(n,e){var r=this,i=r.attr("id")||Math.floor(1e6*Math.random()).toString(36),o={width:r.width(),height:r.height(),center:{x:(e&&e.width?e.width:r.width())/2,y:(e&&e.height?e.height:r.height())/2},delayedMode:n.length>50,shape:!1,encodeURI:!0,removeOverflowing:!0};e=t.extend(o,e||{}),r.addClass("jqcloud").width(e.width).height(e.height),"static"===r.css("position")&&r.css("position","relative");var a=function(){for(var o=function(t,n){var e=function(t,n){return Math.abs(2*t.offsetLeft+t.offsetWidth-2*n.offsetLeft-n.offsetWidth)<t.offsetWidth+n.offsetWidth&&Math.abs(2*t.offsetTop+t.offsetHeight-2*n.offsetTop-n.offsetHeight)<t.offsetHeight+n.offsetHeight?!0:!1},r=0;for(r=0;r<n.length;r++)if(e(t,n[r]))return!0;return!1},a=0;a<n.length;a++)n[a].weight=parseFloat(n[a].weight,10);n.sort(function(t,n){return t.weight<n.weight?1:t.weight>n.weight?-1:0});var u="rectangular"===e.shape?18:2,s=[],l=e.width/e.height,c=function(a,c){var f,p=i+"_word_"+a,h=6.28*Math.random(),d=0,v=0,g=0,m=5,y="",_="";if(c.html=t.extend(c.html,{id:p}),c.html&&c.html["class"]&&(y=c.html["class"],delete c.html["class"]),n[0].weight>n[n.length-1].weight&&(m=Math.round((c.weight-n[n.length-1].weight)/(n[0].weight-n[n.length-1].weight)*9)+1),f=t("<span>").attr(c.html).addClass("w"+m+" "+y),c.link?("string"==typeof c.link&&(c.link={href:c.link}),e.encodeURI&&(c.link=t.extend(c.link,{href:encodeURI(c.link.href).replace(/'/g,"%27")})),_=t("<a>").attr(c.link).text(c.text)):_=c.text,f.append(_),c.handlers)for(var w in c.handlers)c.handlers.hasOwnProperty(w)&&"function"==typeof c.handlers[w]&&t(f).bind(w,c.handlers[w]);r.append(f);var x=f.width(),E=f.height(),b=e.center.x-x/2,M=e.center.y-E/2,k=f[0].style;for(k.position="absolute",k.left=b+"px",k.top=M+"px";o(f[0],s);){if("rectangular"===e.shape)switch(v++,v*u>(1+Math.floor(g/2))*u*(g%4%2===0?1:l)&&(v=0,g++),g%4){case 1:b+=u*l+2*Math.random();break;case 2:M-=u+2*Math.random();break;case 3:b-=u*l+2*Math.random();break;case 0:M+=u+2*Math.random()}else d+=u,h+=(a%2===0?1:-1)*u,b=e.center.x-x/2+d*Math.cos(h)*l,M=e.center.y+d*Math.sin(h)-E/2;k.left=b+"px",k.top=M+"px"}return e.removeOverflowing&&(0>b||0>M||b+x>e.width||M+E>e.height)?void f.remove():(s.push(f[0]),void(t.isFunction(c.afterWordRender)&&c.afterWordRender.call(f)))},f=function(i){return i=i||0,r.is(":visible")?void(i<n.length?(c(i,n[i]),setTimeout(function(){f(i+1)},10)):t.isFunction(e.afterCloudRender)&&e.afterCloudRender.call(r)):void setTimeout(function(){f(i)},10)};e.delayedMode?f():(t.each(n,c),t.isFunction(e.afterCloudRender)&&e.afterCloudRender.call(r))};return setTimeout(function(){a()},10),r}}(jQuery),function(t){function n(n,i){this.options=t.extend({},r,i),this.$el=t(n),this._defaults=r,this._name=e,this._offset_x=14,this._current_offset_x=14,this._gap=this.options.gap,this._eDotWidth=16,this._$toolTip=null,this._a$Events=[],this._aEvents=[],this._counter=0,this.$mainContainer,this.init()}var e="jqTimeline",r={startYear:(new Date).getFullYear()-1,numYears:3,gap:25,showToolTip:!0,groupEventWithinPx:6,events:[],click:null},i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.prototype.init=function(){_this=this,this._generateMarkup(),_this.options.click&&_this.$mainContainer.on("click",function(n){var e=t(n.target);if(e.hasClass("event")||e.hasClass("msg")){var r=e.attr("id").split("_")[1];_this.options.click(n,_this._aEvents[r])}if(e.hasClass("closeTooltip")){var r=e.attr("id").split("_")[1],i=t("#"+r);_this._addEventListner(i,"mouseleave");var o=t("#tooltip_"+r);o.remove()}})},n.prototype._generateMarkup=function(){var n=this,e=0,r=0,i=n.options.numYears*this._gap*12+3,o=i+30,a=this.$mainContainer=t('<div class="gt-timeline" style="width:'+o+'px"><div class="main_line" style="width:'+i+'px"></div></div>');for(r=0;r<n.options.numYears;r++)for(e=0;12>e;e++)a.append(n._getMonthMarkup(e,n.options.startYear+r));a.append(n._getMonthMarkup(0,n.options.startYear+n.options.numYears));for(var u=0;u<n.options.events.length;u++){var s=n.options.events[u],l=s.on;l.getFullYear()>=n.options.startYear&&l.getFullYear()<n.options.startYear+n.options.numYears&&a.append(n._getEventMarkup(s))}n.$el.append(a)},n.prototype._getMonthMarkup=function(t,n){var e=this,r="";return r=0==t?'<div class="horizontal-line leftend" style="left:'+e._current_offset_x+'px"><div class="year">'+n+'</div><div class="month">Jan</div></div>':t%2==1?'<div class="horizontal-line month-line odd-month" style="left:'+e._current_offset_x+'px"></div>':'<div class="horizontal-line month-line even-month" style="left:'+e._current_offset_x+'px"><div class="month">'+i[t]+"</div></div>",e._current_offset_x+=e._gap,r},n.prototype._getGenId=function(){for(var t=this;t._counter in this._aEvents;)t._counter++;return t._counter},n.prototype._showToolTip=function(n,e,r){var i=this;i._$toolTip=t('<div class="e-message" id="tooltip_'+r+'" style="left:'+n+'px"><div class="message-pointer"></div>'+e+"</div>"),i.$mainContainer.append(i._$toolTip)},n.prototype._getAllNeighborEvents=function(n){var e=this,r=t(".event",e.$mainContainer).filter(function(){var r=parseInt(t(this).css("left"));return r<=n+e.options.groupEventWithinPx&&r>=n-e.options.groupEventWithinPx});return r},n.prototype._getEventMarkup=function(n){var e=this;"undefined"==typeof n.id&&(n.id=e._getGenId()),e._aEvents[n.id]=n;var r=(n.name,n.on),i=r.getDate(),o=r.getFullYear()-e.options.startYear,a=r.getMonth(),u=12*o+a,s=Math.ceil(e._offset_x+u*e.options.gap+e.options.gap/31*i-e._eDotWidth/2),l=t('<div class="event" id="event_'+n.id+'" style="left:'+s+'px">&nbsp;</div>').data("event",n);return l.data("eventInfo",e._aEvents[n.id]),e.options.click&&e._addEventListner(l,"click"),e.options.showToolTip&&(e._addEventListner(l,"mouseover"),e._addEventListner(l,"mouseleave")),e._a$Events[n.id]=l,l},n.prototype._addEventListner=function(n,e){var r=this;"mouseover"==e&&n.mouseover(function(n){var e=t(n.target),i=parseInt(e.css("left")),o=e.data("event");if(r._$toolTip){if(r._$toolTip.data("state")&&"static"===r._$toolTip.data("state")){var a=r._$toolTip.data("eventId"),u=t("#"+a);r._addEventListner(u,"mouseleave"),r._$toolTip.data("state","dynamic")}r._$toolTip.remove()}for(var s=r._getAllNeighborEvents(i),l="",c=0;c<s.length;c++){var f=t(s[c]),p=f.data("event");l=l+'<div class="msg" id="msg_'+p.id+'">'+p.on.toDateString()+" : "+p.name+"</div>"}r._showToolTip(i,l,o.id,!1)}),"mouseleave"==e&&n.mouseleave(function(n){var e=t(this),r=e.data("event").id,i=t("#tooltip_"+r);n.stopImmediatePropagation();var o=setTimeout(function(){i.remove()},500);i.hover(function(){clearTimeout(o)},function(){i.remove()})}),"click"==e&&n.click(function(e){var r=t(this),i=r.data("event").id,o=t("#tooltip_"+i),a=t(".msg",o);if(1==a.length);else if(a.length>1){e.stopPropagation();var u=t('<div class="info"><div>Select one even from below : </div><div class="icon-close closeTooltip" id="eCloseButton_'+i+'"></div></div>');o.prepend(u),n.off("mouseleave"),o.data("state","static"),o.data("eventId",i)}})};var o=function(t){return"[object Array]"===Object.prototype.toString.apply(t)};n.prototype.addEvent=function(n){var e=[],r=0;for(e=t.isArray(n)?n:[n],r=0;r<e.length;r++){var i=this._getEventMarkup(e[r]);this.$mainContainer.append(i)}},n.prototype.deleteEvent=function(t){var n=this;if("undefined"!=typeof t){var e,r=[];for(r="number"==typeof t||"string"==typeof t?[t]:o(t)?t:[t],e=0;e<r.length;e++){var i=r[e];if("object"==typeof i){if("undefined"==typeof i.id)continue;i=i.id}var a=n._a$Events[i];"undefined"!=typeof a&&(a.remove(),delete n._a$Events[i],delete n._aEvents[i])}}},n.prototype.getAllEvents=function(){var t=this,n=[];for(key in t._aEvents)n.push(t._aEvents[key]);return n},n.prototype.getAllEventsElements=function(){var t=this,n=[];for(key in t._a$Events)n.push(t._a$Events[key]);return this._a$Events},t.fn.jqtimeline=function(e){return this.each(function(){var r=t(this);if(!r.data("timeline")){var i=new n(this,e);r.data("jqtimeline",i)}})}}(jQuery,window),function(){var t=this,n=t._,e={},r=Array.prototype,i=Object.prototype,o=Function.prototype,a=r.push,u=r.slice,s=r.concat,l=i.toString,c=i.hasOwnProperty,f=r.forEach,p=r.map,h=r.reduce,d=r.reduceRight,v=r.filter,g=r.every,m=r.some,y=r.indexOf,_=r.lastIndexOf,w=Array.isArray,x=Object.keys,E=o.bind,b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):t._=b,b.VERSION="1.6.0";var M=b.each=b.forEach=function(t,n,r){if(null==t)return t;if(f&&t.forEach===f)t.forEach(n,r);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(n.call(r,t[i],i,t)===e)return}else for(var a=b.keys(t),i=0,o=a.length;o>i;i++)if(n.call(r,t[a[i]],a[i],t)===e)return;return t};b.map=b.collect=function(t,n,e){var r=[];return null==t?r:p&&t.map===p?t.map(n,e):(M(t,function(t,i,o){r.push(n.call(e,t,i,o))}),r)};var k="Reduce of empty array with no initial value";b.reduce=b.foldl=b.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return r&&(n=b.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(M(t,function(t,o,a){i?e=n.call(r,e,t,o,a):(e=t,i=!0)}),!i)throw new TypeError(k);return e},b.reduceRight=b.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return r&&(n=b.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var o=t.length;if(o!==+o){var a=b.keys(t);o=a.length}if(M(t,function(u,s,l){s=a?a[--o]:--o,i?e=n.call(r,e,t[s],s,l):(e=t[s],i=!0)}),!i)throw new TypeError(k);return e},b.find=b.detect=function(t,n,e){var r;return $(t,function(t,i,o){return n.call(e,t,i,o)?(r=t,!0):void 0}),r},b.filter=b.select=function(t,n,e){var r=[];return null==t?r:v&&t.filter===v?t.filter(n,e):(M(t,function(t,i,o){n.call(e,t,i,o)&&r.push(t)}),r)},b.reject=function(t,n,e){return b.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},b.every=b.all=function(t,n,r){n||(n=b.identity);var i=!0;return null==t?i:g&&t.every===g?t.every(n,r):(M(t,function(t,o,a){return(i=i&&n.call(r,t,o,a))?void 0:e}),!!i)};var $=b.some=b.any=function(t,n,r){n||(n=b.identity);var i=!1;return null==t?i:m&&t.some===m?t.some(n,r):(M(t,function(t,o,a){return i||(i=n.call(r,t,o,a))?e:void 0}),!!i)};b.contains=b.include=function(t,n){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(n):$(t,function(t){return t===n})},b.invoke=function(t,n){var e=u.call(arguments,2),r=b.isFunction(n);return b.map(t,function(t){return(r?n:t[n]).apply(t,e)})},b.pluck=function(t,n){return b.map(t,b.property(n))},b.where=function(t,n){return b.filter(t,b.matches(n))},b.findWhere=function(t,n){return b.find(t,b.matches(n))},b.max=function(t,n,e){if(!n&&b.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return M(t,function(t,o,a){var u=n?n.call(e,t,o,a):t;u>i&&(r=t,i=u)}),r},b.min=function(t,n,e){if(!n&&b.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return M(t,function(t,o,a){var u=n?n.call(e,t,o,a):t;i>u&&(r=t,i=u)}),r},b.shuffle=function(t){var n,e=0,r=[];return M(t,function(t){n=b.random(e++),r[e-1]=r[n],r[n]=t}),r},b.sample=function(t,n,e){return null==n||e?(t.length!==+t.length&&(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,n))};var T=function(t){return null==t?b.identity:b.isFunction(t)?t:b.property(t)};b.sortBy=function(t,n,e){return n=T(n),b.pluck(b.map(t,function(t,r,i){return{value:t,index:r,criteria:n.call(e,t,r,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index-n.index}),"value")};var j=function(t){return function(n,e,r){var i={};return e=T(e),M(n,function(o,a){var u=e.call(r,o,a,n);t(i,u,o)}),i}};b.groupBy=j(function(t,n,e){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=j(function(t,n,e){t[n]=e}),b.countBy=j(function(t,n){b.has(t,n)?t[n]++:t[n]=1}),b.sortedIndex=function(t,n,e,r){e=T(e);for(var i=e.call(r,n),o=0,a=t.length;a>o;){var u=o+a>>>1;e.call(r,t[u])<i?o=u+1:a=u}return o},b.toArray=function(t){return t?b.isArray(t)?u.call(t):t.length===+t.length?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:t.length===+t.length?t.length:b.keys(t).length},b.first=b.head=b.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:0>n?[]:u.call(t,0,n)},b.initial=function(t,n,e){return u.call(t,0,t.length-(null==n||e?1:n))},b.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:u.call(t,Math.max(t.length-n,0))},b.rest=b.tail=b.drop=function(t,n,e){return u.call(t,null==n||e?1:n)},b.compact=function(t){return b.filter(t,b.identity)};var A=function(t,n,e){return n&&b.every(t,b.isArray)?s.apply(e,t):(M(t,function(t){b.isArray(t)||b.isArguments(t)?n?a.apply(e,t):A(t,n,e):e.push(t)}),e)};b.flatten=function(t,n){return A(t,n,[])},b.without=function(t){return b.difference(t,u.call(arguments,1))},b.partition=function(t,n){var e=[],r=[];return M(t,function(t){(n(t)?e:r).push(t)}),[e,r]},b.uniq=b.unique=function(t,n,e,r){b.isFunction(n)&&(r=e,e=n,n=!1);var i=e?b.map(t,e,r):t,o=[],a=[];return M(i,function(e,r){(n?r&&a[a.length-1]===e:b.contains(a,e))||(a.push(e),o.push(t[r]))}),o},b.union=function(){return b.uniq(b.flatten(arguments,!0))},b.intersection=function(t){var n=u.call(arguments,1);return b.filter(b.uniq(t),function(t){return b.every(n,function(n){return b.contains(n,t)})})},b.difference=function(t){var n=s.apply(r,u.call(arguments,1));return b.filter(t,function(t){return!b.contains(n,t)})},b.zip=function(){for(var t=b.max(b.pluck(arguments,"length").concat(0)),n=new Array(t),e=0;t>e;e++)n[e]=b.pluck(arguments,""+e);return n},b.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},b.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=b.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(y&&t.indexOf===y)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},b.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},b.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=e;return o};var C=function(){};b.bind=function(t,n){var e,r;if(E&&t.bind===E)return E.apply(t,u.call(arguments,1));if(!b.isFunction(t))throw new TypeError;return e=u.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(n,e.concat(u.call(arguments)));C.prototype=t.prototype;var i=new C;C.prototype=null;var o=t.apply(i,e.concat(u.call(arguments)));return Object(o)===o?o:i}},b.partial=function(t){var n=u.call(arguments,1);return function(){for(var e=0,r=n.slice(),i=0,o=r.length;o>i;i++)r[i]===b&&(r[i]=arguments[e++]);for(;e<arguments.length;)r.push(arguments[e++]);return t.apply(this,r)}},b.bindAll=function(t){var n=u.call(arguments,1);if(0===n.length)throw new Error("bindAll must be passed function names");return M(n,function(n){t[n]=b.bind(t[n],t)}),t},b.memoize=function(t,n){var e={};return n||(n=b.identity),function(){var r=n.apply(this,arguments);return b.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},b.delay=function(t,n){var e=u.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},b.defer=function(t){return b.delay.apply(b,[t,1].concat(u.call(arguments,1)))},b.throttle=function(t,n,e){var r,i,o,a=null,u=0;e||(e={});var s=function(){u=e.leading===!1?0:b.now(),a=null,o=t.apply(r,i),r=i=null};return function(){var l=b.now();u||e.leading!==!1||(u=l);var c=n-(l-u);return r=this,i=arguments,0>=c?(clearTimeout(a),a=null,u=l,o=t.apply(r,i),r=i=null):a||e.trailing===!1||(a=setTimeout(s,c)),o}},b.debounce=function(t,n,e){var r,i,o,a,u,s=function(){var l=b.now()-a;n>l?r=setTimeout(s,n-l):(r=null,e||(u=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,a=b.now();var l=e&&!r;return r||(r=setTimeout(s,n)),l&&(u=t.apply(o,i),o=i=null),u}},b.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},b.wrap=function(t,n){return b.partial(n,t)},b.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},b.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},b.keys=function(t){if(!b.isObject(t))return[];if(x)return x(t);var n=[];for(var e in t)b.has(t,e)&&n.push(e);return n},b.values=function(t){for(var n=b.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=t[n[i]];return r},b.pairs=function(t){for(var n=b.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=[n[i],t[n[i]]];return r},b.invert=function(t){for(var n={},e=b.keys(t),r=0,i=e.length;i>r;r++)n[t[e[r]]]=e[r];return n},b.functions=b.methods=function(t){var n=[];for(var e in t)b.isFunction(t[e])&&n.push(e);return n.sort()},b.extend=function(t){return M(u.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},b.pick=function(t){var n={},e=s.apply(r,u.call(arguments,1));return M(e,function(e){e in t&&(n[e]=t[e])}),n},b.omit=function(t){var n={},e=s.apply(r,u.call(arguments,1));for(var i in t)b.contains(e,i)||(n[i]=t[i]);return n},b.defaults=function(t){return M(u.call(arguments,1),function(n){if(n)for(var e in n)void 0===t[e]&&(t[e]=n[e])}),t},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,n){return n(t),t};var F=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof b&&(t=t._wrapped),n instanceof b&&(n=n._wrapped);var i=l.call(t);if(i!=l.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return r[o]==n;var a=t.constructor,u=n.constructor;if(a!==u&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1;e.push(t),r.push(n);var s=0,c=!0;if("[object Array]"==i){if(s=t.length,c=s==n.length)for(;s--&&(c=F(t[s],n[s],e,r)););}else{for(var f in t)if(b.has(t,f)&&(s++,!(c=b.has(n,f)&&F(t[f],n[f],e,r))))break;if(c){for(f in n)if(b.has(n,f)&&!s--)break;c=!s}}return e.pop(),r.pop(),c};b.isEqual=function(t,n){return F(t,n,[],[])},b.isEmpty=function(t){if(null==t)return!0;if(b.isArray(t)||b.isString(t))return 0===t.length;for(var n in t)if(b.has(t,n))return!1;return!0},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=w||function(t){return"[object Array]"==l.call(t)},b.isObject=function(t){return t===Object(t)},M(["Arguments","Function","String","Number","Date","RegExp"],function(t){b["is"+t]=function(n){return l.call(n)=="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return!(!t||!b.has(t,"callee"))}),"function"!=typeof/./&&(b.isFunction=function(t){return"function"==typeof t}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!=+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,n){return c.call(t,n)},b.noConflict=function(){return t._=n,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.property=function(t){return function(n){return n[t]}},b.matches=function(t){return function(n){if(n===t)return!0;for(var e in t)if(t[e]!==n[e])return!1;return!0}},b.times=function(t,n,e){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=n.call(e,i);return r},b.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=b.invert(O.escape);var R={escape:new RegExp("["+b.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+b.keys(O.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(t){b[t]=function(n){return null==n?"":(""+n).replace(R[t],function(n){return O[t][n]})}}),b.result=function(t,n){if(null==t)return void 0;var e=t[n];return b.isFunction(e)?e.call(t):e},b.mixin=function(t){M(b.functions(t),function(n){var e=b[n]=t[n];b.prototype[n]=function(){var t=[this._wrapped];return a.apply(t,arguments),N.call(this,e.apply(b,t))}})};var I=0;b.uniqueId=function(t){var n=++I+"";return t?t+n:n},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(t,n,e){var r;e=b.defaults({},e,b.templateSettings);var i=new RegExp([(e.escape||Y).source,(e.interpolate||Y).source,(e.evaluate||Y).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(n,e,r,i,u){return a+=t.slice(o,u).replace(D,function(t){return"\\"+S[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=u+n.length,n}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(u){throw u.source=a,u}if(n)return r(n,b);var s=function(t){return r.call(this,t,b)};return s.source="function("+(e.variable||"obj")+"){\n"+a+"}",s},b.chain=function(t){return b(t).chain()};var N=function(t){return this._chain?b(t).chain():t};b.mixin(b),M(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];b.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],N.call(this,e)}}),M(["concat","join","slice"],function(t){var n=r[t];b.prototype[t]=function(){return N.call(this,n.apply(this._wrapped,arguments))}}),b.extend(b.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),$(function(){$.widget("whimsical.timeline",{options:{range:null,months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tipContainer:"body",tipTrigger:"hover",tipFormatter:function(t){return t},beforeCreate:null,afterCreate:null},_create:function(){this._trigger("beforeCreate"),this.options.events.sort(function(t,n){return t.range[0].getTime()>n.range[0].getTime()});var t=this.options.events[this.options.events.length-1].range[1],n=this.options.events[0].range[0];this.options.range=this.options.range||[n,new Date(t.setMonth(t.getMonth()+1))],0!==n.getMonth()&&(this.options.range[0]=new Date(n.getFullYear(),0,1),this.options.events.unshift({range:[this.options.range[0],this.options.events[0].range[0]],"class":"filler"})),this.num_months=this._getMonths(this.options.range[0],this.options.range[1]);var e=this,r=this.element.addClass("whimsical-timeline"),i=$(document.createElement("table")).attr("id","whimsical-timeline_"+$(".whimsical-timeline").length);if(this.options.range[0]>this.options.range[1]){var o=this.options.range[0];this.options.range[0]=this.options.range[1],this.options.range[1]=o}var a=$(document.createElement("tbody"));this.$events=$(document.createElement("tr")).addClass("timeline-events").appendTo(a),this.$events.append($(document.createElement("td")).attr("colspan","2"));for(var u=0;u<this.options.events.length;u++)this._addEvent(this.options.events[u]);this.$events.append($(document.createElement("td")).attr("colspan","3"));var s=$(document.createElement("tr")).addClass("timeline-top").appendTo(a),l=$(document.createElement("tr")).addClass("timeline-months").appendTo(a);l.append($(document.createElement("td")));var c=$(document.createElement("tr")).addClass("timeline-years").appendTo(a);for(c.append($(document.createElement("td"))),u=0;u<Math.floor(this.num_months/12);u++)c.append($(document.createElement("td")).attr("colspan",24).html(this.options.range[0].getFullYear()+u));var f=this.num_months%12*2;for(f>0&&c.append($(document.createElement("td")).attr("colspan",f).html(this.options.range[0].getFullYear()+Math.floor(this.num_months/12))),u=0;u<this.num_months+1;u++){s.append($(document.createElement("td")).attr("colspan","2"));var p=this.options.months[u%12];l.append($(document.createElement("td")).attr("colspan","2").html(p).addClass("month").attr("id","month-"+u))}s.append($(document.createElement("td"))),a.appendTo(i),i.appendTo(r),e._trigger("afterCreate")},_destroy:function(){this.element.removeClass("whimsical-timeline")},_addEvent:function(t){this.$events.append($(document.createElement("td")).attr("colspan",2*this._getMonths(t.range[0],t.range[1])).attr("title",this.options.tipFormatter.call(this,t)).tooltip({container:this.options.tipContainer,html:!0,trigger:this.options.tipTrigger}).data({event:t,id:t.id}).attr("id",t.id?"event-"+t.id:"event").addClass("timeline-event"+(t.class?" "+t.class:"")))},_getMonths:function(t,n){var e;return e=12*(n.getFullYear()-t.getFullYear()),e-=t.getMonth()+1,e+=n.getMonth(),(0>=e?0:e)+1}})});