!function(t){"use strict";t.fn.jQCloud=function(n,e){var r=this,i=r.attr("id")||Math.floor(1e6*Math.random()).toString(36),o={width:r.width(),height:r.height(),center:{x:(e&&e.width?e.width:r.width())/2,y:(e&&e.height?e.height:r.height())/2},delayedMode:n.length>50,shape:!1,encodeURI:!0,removeOverflowing:!0};e=t.extend(o,e||{}),r.addClass("jqcloud").width(e.width).height(e.height),"static"===r.css("position")&&r.css("position","relative");var a=function(){for(var o=function(t,n){var e=function(t,n){return Math.abs(2*t.offsetLeft+t.offsetWidth-2*n.offsetLeft-n.offsetWidth)<t.offsetWidth+n.offsetWidth&&Math.abs(2*t.offsetTop+t.offsetHeight-2*n.offsetTop-n.offsetHeight)<t.offsetHeight+n.offsetHeight?!0:!1},r=0;for(r=0;r<n.length;r++)if(e(t,n[r]))return!0;return!1},a=0;a<n.length;a++)n[a].weight=parseFloat(n[a].weight,10);n.sort(function(t,n){return t.weight<n.weight?1:t.weight>n.weight?-1:0});var u="rectangular"===e.shape?18:2,l=[],s=e.width/e.height,c=function(a,c){var f,p=i+"_word_"+a,h=6.28*Math.random(),d=0,g=0,v=0,m=5,y="",_="";if(c.html=t.extend(c.html,{id:p}),c.html&&c.html["class"]&&(y=c.html["class"],delete c.html["class"]),n[0].weight>n[n.length-1].weight&&(m=Math.round((c.weight-n[n.length-1].weight)/(n[0].weight-n[n.length-1].weight)*9)+1),f=t("<span>").attr(c.html).addClass("w"+m+" "+y),c.link?("string"==typeof c.link&&(c.link={href:c.link}),e.encodeURI&&(c.link=t.extend(c.link,{href:encodeURI(c.link.href).replace(/'/g,"%27")})),_=t("<a>").attr(c.link).text(c.text)):_=c.text,f.append(_),c.handlers)for(var w in c.handlers)c.handlers.hasOwnProperty(w)&&"function"==typeof c.handlers[w]&&t(f).bind(w,c.handlers[w]);r.append(f);var x=f.width(),b=f.height(),E=e.center.x-x/2,$=e.center.y-b/2,k=f[0].style;for(k.position="absolute",k.left=E+"px",k.top=$+"px";o(f[0],l);){if("rectangular"===e.shape)switch(g++,g*u>(1+Math.floor(v/2))*u*(v%4%2===0?1:s)&&(g=0,v++),v%4){case 1:E+=u*s+2*Math.random();break;case 2:$-=u+2*Math.random();break;case 3:E-=u*s+2*Math.random();break;case 0:$+=u+2*Math.random()}else d+=u,h+=(a%2===0?1:-1)*u,E=e.center.x-x/2+d*Math.cos(h)*s,$=e.center.y+d*Math.sin(h)-b/2;k.left=E+"px",k.top=$+"px"}return e.removeOverflowing&&(0>E||0>$||E+x>e.width||$+b>e.height)?void f.remove():(l.push(f[0]),void(t.isFunction(c.afterWordRender)&&c.afterWordRender.call(f)))},f=function(i){return i=i||0,r.is(":visible")?void(i<n.length?(c(i,n[i]),setTimeout(function(){f(i+1)},10)):t.isFunction(e.afterCloudRender)&&e.afterCloudRender.call(r)):void setTimeout(function(){f(i)},10)};e.delayedMode?f():(t.each(n,c),t.isFunction(e.afterCloudRender)&&e.afterCloudRender.call(r))};return setTimeout(function(){a()},10),r}}(jQuery),function(t){function n(n,i){this.options=t.extend({},r,i),this.$el=t(n),this._defaults=r,this._name=e,this._offset_x=14,this._current_offset_x=14,this._gap=this.options.gap,this._eDotWidth=16,this._$toolTip=null,this._a$Events=[],this._aEvents=[],this._counter=0,this.$mainContainer,this.init()}var e="jqTimeline",r={startYear:(new Date).getFullYear()-1,numYears:3,gap:25,showToolTip:!0,groupEventWithinPx:6,events:[],click:null},i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.prototype.init=function(){_this=this,this._generateMarkup(),_this.options.click&&_this.$mainContainer.on("click",function(n){var e=t(n.target);if(e.hasClass("event")||e.hasClass("msg")){var r=e.attr("id").split("_")[1];_this.options.click(n,_this._aEvents[r])}if(e.hasClass("closeTooltip")){var r=e.attr("id").split("_")[1],i=t("#"+r);_this._addEventListner(i,"mouseleave");var o=t("#tooltip_"+r);o.remove()}})},n.prototype._generateMarkup=function(){var n=this,e=0,r=0,i=n.options.numYears*this._gap*12+3,o=i+30,a=this.$mainContainer=t('<div class="gt-timeline" style="width:'+o+'px"><div class="main_line" style="width:'+i+'px"></div></div>');for(r=0;r<n.options.numYears;r++)for(e=0;12>e;e++)a.append(n._getMonthMarkup(e,n.options.startYear+r));a.append(n._getMonthMarkup(0,n.options.startYear+n.options.numYears));for(var u=0;u<n.options.events.length;u++){var l=n.options.events[u],s=l.on;s.getFullYear()>=n.options.startYear&&s.getFullYear()<n.options.startYear+n.options.numYears&&a.append(n._getEventMarkup(l))}n.$el.append(a)},n.prototype._getMonthMarkup=function(t,n){var e=this,r="";return r=0==t?'<div class="horizontal-line leftend" style="left:'+e._current_offset_x+'px"><div class="year">'+n+'</div><div class="month">Jan</div></div>':t%2==1?'<div class="horizontal-line month-line odd-month" style="left:'+e._current_offset_x+'px"></div>':'<div class="horizontal-line month-line even-month" style="left:'+e._current_offset_x+'px"><div class="month">'+i[t]+"</div></div>",e._current_offset_x+=e._gap,r},n.prototype._getGenId=function(){for(var t=this;t._counter in this._aEvents;)t._counter++;return t._counter},n.prototype._showToolTip=function(n,e,r){var i=this;i._$toolTip=t('<div class="e-message" id="tooltip_'+r+'" style="left:'+n+'px"><div class="message-pointer"></div>'+e+"</div>"),i.$mainContainer.append(i._$toolTip)},n.prototype._getAllNeighborEvents=function(n){var e=this,r=t(".event",e.$mainContainer).filter(function(){var r=parseInt(t(this).css("left"));return r<=n+e.options.groupEventWithinPx&&r>=n-e.options.groupEventWithinPx});return r},n.prototype._getEventMarkup=function(n){var e=this;"undefined"==typeof n.id&&(n.id=e._getGenId()),e._aEvents[n.id]=n;var r=(n.name,n.on),i=r.getDate(),o=r.getFullYear()-e.options.startYear,a=r.getMonth(),u=12*o+a,l=Math.ceil(e._offset_x+u*e.options.gap+e.options.gap/31*i-e._eDotWidth/2),s=t('<div class="event" id="event_'+n.id+'" style="left:'+l+'px">&nbsp;</div>').data("event",n);return s.data("eventInfo",e._aEvents[n.id]),e.options.click&&e._addEventListner(s,"click"),e.options.showToolTip&&(e._addEventListner(s,"mouseover"),e._addEventListner(s,"mouseleave")),e._a$Events[n.id]=s,s},n.prototype._addEventListner=function(n,e){var r=this;"mouseover"==e&&n.mouseover(function(n){var e=t(n.target),i=parseInt(e.css("left")),o=e.data("event");if(r._$toolTip){if(r._$toolTip.data("state")&&"static"===r._$toolTip.data("state")){var a=r._$toolTip.data("eventId"),u=t("#"+a);r._addEventListner(u,"mouseleave"),r._$toolTip.data("state","dynamic")}r._$toolTip.remove()}for(var l=r._getAllNeighborEvents(i),s="",c=0;c<l.length;c++){var f=t(l[c]),p=f.data("event");s=s+'<div class="msg" id="msg_'+p.id+'">'+p.on.toDateString()+" : "+p.name+"</div>"}r._showToolTip(i,s,o.id,!1)}),"mouseleave"==e&&n.mouseleave(function(n){var e=t(this),r=e.data("event").id,i=t("#tooltip_"+r);n.stopImmediatePropagation();var o=setTimeout(function(){i.remove()},500);i.hover(function(){clearTimeout(o)},function(){i.remove()})}),"click"==e&&n.click(function(e){var r=t(this),i=r.data("event").id,o=t("#tooltip_"+i),a=t(".msg",o);if(1==a.length);else if(a.length>1){e.stopPropagation();var u=t('<div class="info"><div>Select one even from below : </div><div class="icon-close closeTooltip" id="eCloseButton_'+i+'"></div></div>');o.prepend(u),n.off("mouseleave"),o.data("state","static"),o.data("eventId",i)}})};var o=function(t){return"[object Array]"===Object.prototype.toString.apply(t)};n.prototype.addEvent=function(n){var e=[],r=0;for(e=t.isArray(n)?n:[n],r=0;r<e.length;r++){var i=this._getEventMarkup(e[r]);this.$mainContainer.append(i)}},n.prototype.deleteEvent=function(t){var n=this;if("undefined"!=typeof t){var e,r=[];for(r="number"==typeof t||"string"==typeof t?[t]:o(t)?t:[t],e=0;e<r.length;e++){var i=r[e];if("object"==typeof i){if("undefined"==typeof i.id)continue;i=i.id}var a=n._a$Events[i];"undefined"!=typeof a&&(a.remove(),delete n._a$Events[i],delete n._aEvents[i])}}},n.prototype.getAllEvents=function(){var t=this,n=[];for(key in t._aEvents)n.push(t._aEvents[key]);return n},n.prototype.getAllEventsElements=function(){var t=this,n=[];for(key in t._a$Events)n.push(t._a$Events[key]);return this._a$Events},t.fn.jqtimeline=function(e){return this.each(function(){var r=t(this);if(!r.data("timeline")){var i=new n(this,e);r.data("jqtimeline",i)}})}}(jQuery,window),function(){var t=this,n=t._,e={},r=Array.prototype,i=Object.prototype,o=Function.prototype,a=r.push,u=r.slice,l=r.concat,s=i.toString,c=i.hasOwnProperty,f=r.forEach,p=r.map,h=r.reduce,d=r.reduceRight,g=r.filter,v=r.every,m=r.some,y=r.indexOf,_=r.lastIndexOf,w=Array.isArray,x=Object.keys,b=o.bind,E=function(t){return t instanceof E?t:this instanceof E?void(this._wrapped=t):new E(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):t._=E,E.VERSION="1.6.0";var $=E.each=E.forEach=function(t,n,r){if(null==t)return t;if(f&&t.forEach===f)t.forEach(n,r);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(n.call(r,t[i],i,t)===e)return}else for(var a=E.keys(t),i=0,o=a.length;o>i;i++)if(n.call(r,t[a[i]],a[i],t)===e)return;return t};E.map=E.collect=function(t,n,e){var r=[];return null==t?r:p&&t.map===p?t.map(n,e):($(t,function(t,i,o){r.push(n.call(e,t,i,o))}),r)};var k="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return r&&(n=E.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if($(t,function(t,o,a){i?e=n.call(r,e,t,o,a):(e=t,i=!0)}),!i)throw new TypeError(k);return e},E.reduceRight=E.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return r&&(n=E.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var o=t.length;if(o!==+o){var a=E.keys(t);o=a.length}if($(t,function(u,l,s){l=a?a[--o]:--o,i?e=n.call(r,e,t[l],l,s):(e=t[l],i=!0)}),!i)throw new TypeError(k);return e},E.find=E.detect=function(t,n,e){var r;return M(t,function(t,i,o){return n.call(e,t,i,o)?(r=t,!0):void 0}),r},E.filter=E.select=function(t,n,e){var r=[];return null==t?r:g&&t.filter===g?t.filter(n,e):($(t,function(t,i,o){n.call(e,t,i,o)&&r.push(t)}),r)},E.reject=function(t,n,e){return E.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},E.every=E.all=function(t,n,r){n||(n=E.identity);var i=!0;return null==t?i:v&&t.every===v?t.every(n,r):($(t,function(t,o,a){return(i=i&&n.call(r,t,o,a))?void 0:e}),!!i)};var M=E.some=E.any=function(t,n,r){n||(n=E.identity);var i=!1;return null==t?i:m&&t.some===m?t.some(n,r):($(t,function(t,o,a){return i||(i=n.call(r,t,o,a))?e:void 0}),!!i)};E.contains=E.include=function(t,n){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(n):M(t,function(t){return t===n})},E.invoke=function(t,n){var e=u.call(arguments,2),r=E.isFunction(n);return E.map(t,function(t){return(r?n:t[n]).apply(t,e)})},E.pluck=function(t,n){return E.map(t,E.property(n))},E.where=function(t,n){return E.filter(t,E.matches(n))},E.findWhere=function(t,n){return E.find(t,E.matches(n))},E.max=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return $(t,function(t,o,a){var u=n?n.call(e,t,o,a):t;u>i&&(r=t,i=u)}),r},E.min=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return $(t,function(t,o,a){var u=n?n.call(e,t,o,a):t;i>u&&(r=t,i=u)}),r},E.shuffle=function(t){var n,e=0,r=[];return $(t,function(t){n=E.random(e++),r[e-1]=r[n],r[n]=t}),r},E.sample=function(t,n,e){return null==n||e?(t.length!==+t.length&&(t=E.values(t)),t[E.random(t.length-1)]):E.shuffle(t).slice(0,Math.max(0,n))};var C=function(t){return null==t?E.identity:E.isFunction(t)?t:E.property(t)};E.sortBy=function(t,n,e){return n=C(n),E.pluck(E.map(t,function(t,r,i){return{value:t,index:r,criteria:n.call(e,t,r,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index-n.index}),"value")};var j=function(t){return function(n,e,r){var i={};return e=C(e),$(n,function(o,a){var u=e.call(r,o,a,n);t(i,u,o)}),i}};E.groupBy=j(function(t,n,e){E.has(t,n)?t[n].push(e):t[n]=[e]}),E.indexBy=j(function(t,n,e){t[n]=e}),E.countBy=j(function(t,n){E.has(t,n)?t[n]++:t[n]=1}),E.sortedIndex=function(t,n,e,r){e=C(e);for(var i=e.call(r,n),o=0,a=t.length;a>o;){var u=o+a>>>1;e.call(r,t[u])<i?o=u+1:a=u}return o},E.toArray=function(t){return t?E.isArray(t)?u.call(t):t.length===+t.length?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:t.length===+t.length?t.length:E.keys(t).length},E.first=E.head=E.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:0>n?[]:u.call(t,0,n)},E.initial=function(t,n,e){return u.call(t,0,t.length-(null==n||e?1:n))},E.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:u.call(t,Math.max(t.length-n,0))},E.rest=E.tail=E.drop=function(t,n,e){return u.call(t,null==n||e?1:n)},E.compact=function(t){return E.filter(t,E.identity)};var T=function(t,n,e){return n&&E.every(t,E.isArray)?l.apply(e,t):($(t,function(t){E.isArray(t)||E.isArguments(t)?n?a.apply(e,t):T(t,n,e):e.push(t)}),e)};E.flatten=function(t,n){return T(t,n,[])},E.without=function(t){return E.difference(t,u.call(arguments,1))},E.partition=function(t,n){var e=[],r=[];return $(t,function(t){(n(t)?e:r).push(t)}),[e,r]},E.uniq=E.unique=function(t,n,e,r){E.isFunction(n)&&(r=e,e=n,n=!1);var i=e?E.map(t,e,r):t,o=[],a=[];return $(i,function(e,r){(n?r&&a[a.length-1]===e:E.contains(a,e))||(a.push(e),o.push(t[r]))}),o},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(t){var n=u.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(n,function(n){return E.contains(n,t)})})},E.difference=function(t){var n=l.apply(r,u.call(arguments,1));return E.filter(t,function(t){return!E.contains(n,t)})},E.zip=function(){for(var t=E.max(E.pluck(arguments,"length").concat(0)),n=new Array(t),e=0;t>e;e++)n[e]=E.pluck(arguments,""+e);return n},E.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},E.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=E.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(y&&t.indexOf===y)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},E.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},E.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=e;return o};var A=function(){};E.bind=function(t,n){var e,r;if(b&&t.bind===b)return b.apply(t,u.call(arguments,1));if(!E.isFunction(t))throw new TypeError;return e=u.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(n,e.concat(u.call(arguments)));A.prototype=t.prototype;var i=new A;A.prototype=null;var o=t.apply(i,e.concat(u.call(arguments)));return Object(o)===o?o:i}},E.partial=function(t){var n=u.call(arguments,1);return function(){for(var e=0,r=n.slice(),i=0,o=r.length;o>i;i++)r[i]===E&&(r[i]=arguments[e++]);for(;e<arguments.length;)r.push(arguments[e++]);return t.apply(this,r)}},E.bindAll=function(t){var n=u.call(arguments,1);if(0===n.length)throw new Error("bindAll must be passed function names");return $(n,function(n){t[n]=E.bind(t[n],t)}),t},E.memoize=function(t,n){var e={};return n||(n=E.identity),function(){var r=n.apply(this,arguments);return E.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},E.delay=function(t,n){var e=u.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},E.defer=function(t){return E.delay.apply(E,[t,1].concat(u.call(arguments,1)))},E.throttle=function(t,n,e){var r,i,o,a=null,u=0;e||(e={});var l=function(){u=e.leading===!1?0:E.now(),a=null,o=t.apply(r,i),r=i=null};return function(){var s=E.now();u||e.leading!==!1||(u=s);var c=n-(s-u);return r=this,i=arguments,0>=c?(clearTimeout(a),a=null,u=s,o=t.apply(r,i),r=i=null):a||e.trailing===!1||(a=setTimeout(l,c)),o}},E.debounce=function(t,n,e){var r,i,o,a,u,l=function(){var s=E.now()-a;n>s?r=setTimeout(l,n-s):(r=null,e||(u=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,a=E.now();var s=e&&!r;return r||(r=setTimeout(l,n)),s&&(u=t.apply(o,i),o=i=null),u}},E.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},E.wrap=function(t,n){return E.partial(n,t)},E.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},E.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},E.keys=function(t){if(!E.isObject(t))return[];if(x)return x(t);var n=[];for(var e in t)E.has(t,e)&&n.push(e);return n},E.values=function(t){for(var n=E.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=t[n[i]];return r},E.pairs=function(t){for(var n=E.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=[n[i],t[n[i]]];return r},E.invert=function(t){for(var n={},e=E.keys(t),r=0,i=e.length;i>r;r++)n[t[e[r]]]=e[r];return n},E.functions=E.methods=function(t){var n=[];for(var e in t)E.isFunction(t[e])&&n.push(e);return n.sort()},E.extend=function(t){return $(u.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},E.pick=function(t){var n={},e=l.apply(r,u.call(arguments,1));return $(e,function(e){e in t&&(n[e]=t[e])}),n},E.omit=function(t){var n={},e=l.apply(r,u.call(arguments,1));for(var i in t)E.contains(e,i)||(n[i]=t[i]);return n},E.defaults=function(t){return $(u.call(arguments,1),function(n){if(n)for(var e in n)void 0===t[e]&&(t[e]=n[e])}),t},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,n){return n(t),t};var F=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof E&&(t=t._wrapped),n instanceof E&&(n=n._wrapped);var i=s.call(t);if(i!=s.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return r[o]==n;var a=t.constructor,u=n.constructor;if(a!==u&&!(E.isFunction(a)&&a instanceof a&&E.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1;e.push(t),r.push(n);var l=0,c=!0;if("[object Array]"==i){if(l=t.length,c=l==n.length)for(;l--&&(c=F(t[l],n[l],e,r)););}else{for(var f in t)if(E.has(t,f)&&(l++,!(c=E.has(n,f)&&F(t[f],n[f],e,r))))break;if(c){for(f in n)if(E.has(n,f)&&!l--)break;c=!l}}return e.pop(),r.pop(),c};E.isEqual=function(t,n){return F(t,n,[],[])},E.isEmpty=function(t){if(null==t)return!0;if(E.isArray(t)||E.isString(t))return 0===t.length;for(var n in t)if(E.has(t,n))return!1;return!0},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=w||function(t){return"[object Array]"==s.call(t)},E.isObject=function(t){return t===Object(t)},$(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(n){return s.call(n)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return!(!t||!E.has(t,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(t){return"function"==typeof t}),E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!=+t},E.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==s.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,n){return c.call(t,n)},E.noConflict=function(){return t._=n,this},E.identity=function(t){return t},E.constant=function(t){return function(){return t}},E.property=function(t){return function(n){return n[t]}},E.matches=function(t){return function(n){if(n===t)return!0;for(var e in t)if(t[e]!==n[e])return!1;return!0}},E.times=function(t,n,e){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=n.call(e,i);return r},E.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},E.now=Date.now||function(){return(new Date).getTime()};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=E.invert(O.escape);var R={escape:new RegExp("["+E.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(O.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(n){return null==n?"":(""+n).replace(R[t],function(n){return O[t][n]})}}),E.result=function(t,n){if(null==t)return void 0;var e=t[n];return E.isFunction(e)?e.call(t):e},E.mixin=function(t){$(E.functions(t),function(n){var e=E[n]=t[n];E.prototype[n]=function(){var t=[this._wrapped];return a.apply(t,arguments),Y.call(this,e.apply(E,t))}})};var S=0;E.uniqueId=function(t){var n=++S+"";return t?t+n:n},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,n,e){var r;e=E.defaults({},e,E.templateSettings);var i=new RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(n,e,r,i,u){return a+=t.slice(o,u).replace(N,function(t){return"\\"+z[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=u+n.length,n}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(u){throw u.source=a,u}if(n)return r(n,E);var l=function(t){return r.call(this,t,E)};return l.source="function("+(e.variable||"obj")+"){\n"+a+"}",l},E.chain=function(t){return E(t).chain()};var Y=function(t){return this._chain?E(t).chain():t};E.mixin(E),$(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];E.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],Y.call(this,e)}}),$(["concat","join","slice"],function(t){var n=r[t];E.prototype[t]=function(){return Y.call(this,n.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return E})}.call(this),!function(t,n){"use strict";var e=n.prototype.trim,r=n.prototype.trimRight,i=n.prototype.trimLeft,o=function(t){return 1*t||0},a=function(t,n){if(1>n)return"";for(var e="";n>0;)1&n&&(e+=t),n>>=1,t+=t;return e},u=[].slice,l=function(t){return null==t?"\\s":t.source?t.source:"["+h.escapeRegExp(t)+"]"},s={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},c={};for(var f in s)c[s[f]]=f;var p=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var e=a,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var o,a,u,l,s,c,f,h=1,d=r.length,g="",v=[];for(a=0;d>a;a++)if(g=t(r[a]),"string"===g)v.push(r[a]);else if("array"===g){if(l=r[a],l[2])for(o=i[h],u=0;u<l[2].length;u++){if(!o.hasOwnProperty(l[2][u]))throw new Error(p('[_.sprintf] property "%s" does not exist',l[2][u]));o=o[l[2][u]]}else o=l[1]?i[l[1]]:i[h++];if(/[^s]/.test(l[8])&&"number"!=t(o))throw new Error(p("[_.sprintf] expecting number but found %s",t(o)));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=n.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=n(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",f=l[6]-n(o).length,s=l[6]?e(c,f):"",v.push(l[5]?o+s:s+o)}return v.join("")},r.cache={},r.parse=function(t){for(var n=t,e=[],r=[],i=0;n;){if(null!==(e=/^[^\x25]+/.exec(n)))r.push(e[0]);else if(null!==(e=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(e=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw new Error("[_.sprintf] huh?");if(e[2]){i|=1;var o=[],a=e[2],u=[];if(null===(u=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(o.push(u[1]);""!==(a=a.substring(u[0].length));)if(null!==(u=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(u[1]);else{if(null===(u=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");o.push(u[1])}e[2]=o}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(e)}n=n.substring(e[0].length)}return r},r}(),h={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":n(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":n(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,e){return null==t?[]:(t=n(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])},clean:function(t){return h.strip(t).replace(/\s+/g," ")},count:function(t,e){return null==t||null==e?0:n(t).split(e).length-1},chars:function(t){return null==t?[]:n(t).split("")},swapCase:function(t){return null==t?"":n(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":n(t).replace(/[&<>"']/g,function(t){return"&"+c[t]+";"})},unescapeHTML:function(t){return null==t?"":n(t).replace(/\&([^;]+);/g,function(t,e){var r;return e in s?s[e]:(r=e.match(/^#x([\da-fA-F]+)$/))?n.fromCharCode(parseInt(r[1],16)):(r=e.match(/^#(\d+)$/))?n.fromCharCode(~~r[1]):t})},escapeRegExp:function(t){return null==t?"":n(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,n,e,r){var i=h.chars(t);return i.splice(~~n,~~e,r),i.join("")},insert:function(t,n,e){return h.splice(t,n,0,e)},include:function(t,e){return""===e?!0:null==t?!1:-1!==n(t).indexOf(e)},join:function(){var t=u.call(arguments),n=t.shift();return null==n&&(n=""),t.join(n)},lines:function(t){return null==t?[]:n(t).split("\n")},reverse:function(t){return h.chars(t).reverse().join("")},startsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=n(t),e=n(e),t.length>=e.length&&t.slice(0,e.length)===e)},endsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=n(t),e=n(e),t.length>=e.length&&t.slice(t.length-e.length)===e)},succ:function(t){return null==t?"":(t=n(t),t.slice(0,-1)+n.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":n(t).replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},camelize:function(t){return h.trim(t).replace(/[-_\s]+(.)?/g,function(t,n){return n.toUpperCase()})},underscored:function(t){return h.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return h.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return h.titleize(n(t).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(t){return h.capitalize(h.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,r){return null==t?"":!r&&e?e.call(t):(r=l(r),n(t).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(t,e){return null==t?"":!e&&i?i.call(t):(e=l(e),n(t).replace(new RegExp("^"+e+"+"),""))},rtrim:function(t,e){return null==t?"":!e&&r?r.call(t):(e=l(e),n(t).replace(new RegExp(e+"+$"),""))},truncate:function(t,e,r){return null==t?"":(t=n(t),r=r||"...",e=~~e,t.length>e?t.slice(0,e)+r:t)},prune:function(t,e,r){if(null==t)return"";if(t=n(t),e=~~e,r=null!=r?n(r):"...",t.length<=e)return t;var i=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},o=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,i);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):h.rtrim(o.slice(0,o.length-1)),(o+r).length>t.length?t:t.slice(0,o.length)+r},words:function(t,n){return h.isBlank(t)?[]:h.trim(t,n).split(n||/\s+/)},pad:function(t,e,r,i){t=null==t?"":n(t),e=~~e;var o=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",i){case"right":return o=e-t.length,t+a(r,o);case"both":return o=e-t.length,a(r,Math.ceil(o/2))+t+a(r,Math.floor(o/2));default:return o=e-t.length,a(r,o)+t}},lpad:function(t,n,e){return h.pad(t,n,e)},rpad:function(t,n,e){return h.pad(t,n,e,"right")},lrpad:function(t,n,e){return h.pad(t,n,e,"both")},sprintf:p,vsprintf:function(t,n){return n.unshift(t),p.apply(null,n)},toNumber:function(t,e){if(null==t||""==t)return 0;t=n(t);var r=o(o(t).toFixed(~~e));return 0!==r||t.match(/^0+$/)?r:Number.NaN},numberFormat:function(t,n,e,r){if(isNaN(t)||null==t)return"";t=t.toFixed(~~n),r=r||",";var i=t.split("."),o=i[0],a=i[1]?(e||".")+i[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+a},strRight:function(t,e){if(null==t)return"";t=n(t),e=null!=e?n(e):e;var r=e?t.indexOf(e):-1;return~r?t.slice(r+e.length,t.length):t},strRightBack:function(t,e){if(null==t)return"";t=n(t),e=null!=e?n(e):e;var r=e?t.lastIndexOf(e):-1;return~r?t.slice(r+e.length,t.length):t},strLeft:function(t,e){if(null==t)return"";t=n(t),e=null!=e?n(e):e;var r=e?t.indexOf(e):-1;return~r?t.slice(0,r):t},strLeftBack:function(t,n){if(null==t)return"";t+="",n=null!=n?""+n:n;var e=t.lastIndexOf(n);return~e?t.slice(0,e):t},toSentence:function(t,n,e,r){n=n||", ",e=e||" and ";var i=t.slice(),o=i.pop();return t.length>2&&r&&(e=h.rtrim(n)+e),i.length?i.join(n)+e+o:o},toSentenceSerial:function(){var t=u.call(arguments);return t[3]=!0,h.toSentence.apply(h,t)},slugify:function(t){if(null==t)return"";var e="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",i=new RegExp(l(e),"g");return t=n(t).toLowerCase().replace(i,function(t){var n=e.indexOf(t);return r.charAt(n)||"-"}),h.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,n){return[n,t,n].join("")},quote:function(t){return h.surround(t,'"')},exports:function(){var t={};for(var n in this)this.hasOwnProperty(n)&&!n.match(/^(?:include|contains|reverse)$/)&&(t[n]=this[n]);return t},repeat:function(t,e,r){if(null==t)return"";if(e=~~e,null==r)return a(n(t),e);for(var i=[];e>0;i[--e]=t);return i.join(r)},levenshtein:function(t,e){if(null==t&&null==e)return 0;if(null==t)return n(e).length;if(null==e)return n(t).length;t=n(t),e=n(e);for(var r,i,o=[],a=0;a<=e.length;a++)for(var u=0;u<=t.length;u++)i=a&&u?t.charAt(u-1)===e.charAt(a-1)?r:Math.min(o[u],o[u-1],r)+1:a+u,r=o[u],o[u]=i;return o.pop()}};h.strip=h.trim,h.lstrip=h.ltrim,h.rstrip=h.rtrim,h.center=h.lrpad,h.rjust=h.lpad,h.ljust=h.rpad,h.contains=h.include,h.q=h.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=h),exports._s=h):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return h}):(t._=t._||{},t._.string=t._.str=h)}(this,String),$(function(){$.widget("whimsical.timeline",{options:{range:null,months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tipContainer:"body",tipTrigger:"hover",tipFormatter:function(t){return t},beforeCreate:null,afterCreate:null},_create:function(){this._trigger("beforeCreate"),this.options.events.sort(function(t,n){return t.range[0].getTime()>n.range[0].getTime()});var t=this.options.events[this.options.events.length-1].range[1],n=this.options.events[0].range[0];this.options.range=this.options.range||[n,new Date(t.setMonth(t.getMonth()+1))],0!==n.getMonth()&&(this.options.range[0]=new Date(n.getFullYear(),0,1),this.options.events.unshift({range:[this.options.range[0],this.options.events[0].range[0]],"class":"filler"})),this.num_months=this._getMonths(this.options.range[0],this.options.range[1]);var e=this,r=this.element.addClass("whimsical-timeline"),i=$(document.createElement("table")).attr("id","whimsical-timeline_"+$(".whimsical-timeline").length);if(this.options.range[0]>this.options.range[1]){var o=this.options.range[0];
this.options.range[0]=this.options.range[1],this.options.range[1]=o}var a=$(document.createElement("tbody"));this.$events=$(document.createElement("tr")).addClass("timeline-events").appendTo(a),this.$events.append($(document.createElement("td")).attr("colspan","2"));for(var u=0;u<this.options.events.length;u++)this._addEvent(this.options.events[u]);this.$events.append($(document.createElement("td")).attr("colspan","3"));var l=$(document.createElement("tr")).addClass("timeline-top").appendTo(a),s=$(document.createElement("tr")).addClass("timeline-months").appendTo(a);s.append($(document.createElement("td")));var c=$(document.createElement("tr")).addClass("timeline-years").appendTo(a);for(c.append($(document.createElement("td"))),u=0;u<Math.floor(this.num_months/12);u++)c.append($(document.createElement("td")).attr("colspan",24).html(this.options.range[0].getFullYear()+u));var f=this.num_months%12*2;for(f>0&&c.append($(document.createElement("td")).attr("colspan",f).html(this.options.range[0].getFullYear()+Math.floor(this.num_months/12))),u=0;u<this.num_months+1;u++){l.append($(document.createElement("td")).attr("colspan","2"));var p=this.options.months[u%12];s.append($(document.createElement("td")).attr("colspan","2").html(p).addClass("month").attr("id","month-"+u))}l.append($(document.createElement("td"))),a.appendTo(i),i.appendTo(r),e._trigger("afterCreate")},_destroy:function(){this.element.removeClass("whimsical-timeline")},_addEvent:function(t){this.$events.append($(document.createElement("td")).attr("colspan",2*this._getMonths(t.range[0],t.range[1])).attr("title",this.options.tipFormatter.call(this,t)).tooltip({container:this.options.tipContainer,html:!0,trigger:this.options.tipTrigger}).data({event:t,id:t.id}).attr("id",t.id?"event-"+t.id:"event").addClass("timeline-event"+(t.class?" "+t.class:"")))},_getMonths:function(t,n){var e;return e=12*(n.getFullYear()-t.getFullYear()),e-=t.getMonth()+1,e+=n.getMonth(),(0>=e?0:e)+1}})});